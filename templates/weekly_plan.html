{% extends "base.html" %}
{% block title %}Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© - SmartStudy{% endblock %}
{% block content %}
<div class="container">
    <div class="card mt-4">
        <div class="card-header bg-dark text-white">
            <h2 class="text-center mb-0"><i class="bi bi-calendar-week"></i> Ø®Ø·ØªÙƒ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</h2>
        </div>
        <div class="card-body">
            {% if schedule %}
            <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ø®Ø·Ø© -->
            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i>
                ØªÙ… ØªÙˆØ²ÙŠØ¹ {{ total_minutes }} Ø¯Ù‚ÙŠÙ‚Ø© ({{ (total_minutes/60)|int }} Ø³Ø§Ø¹Ø©) Ø¯Ø±Ø§Ø³ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©.
                {% if rest_day %}
                <strong>ÙŠÙˆÙ… Ø§Ù„Ø¹Ø·Ù„Ø©: {{ rest_day }}</strong> (Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…)
                {% endif %}
            </div>

            <!-- ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-dark text-white">
                            <h5 class="mb-0"><i class="bi bi-clock"></i> ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                {% for name, data in subject_minutes.items() %}
                                <div class="col-md-4 mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span><strong>{{ name }}</strong> <small class="text-muted">({{ data.grade }}%)</small></span>
                                        <span class="badge {% if data.priority == 'Ø¹Ø§Ù„ÙŠØ©' %}bg-danger{% elif data.priority == 'Ù…ØªÙˆØ³Ø·Ø©' %}bg-warning{% else %}bg-success{% endif %}">
                                            {{ data.minutes }} Ø¯
                                        </span>
                                    </div>
                                    <div class="progress" style="height: 8px;">
                                        <div class="progress-bar {% if data.priority == 'Ø¹Ø§Ù„ÙŠØ©' %}bg-danger{% elif data.priority == 'Ù…ØªÙˆØ³Ø·Ø©' %}bg-warning{% else %}bg-success{% endif %}" style="width: {{ (data.minutes / total_minutes * 100) }}%;"></div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ -->
            <div class="row g-4">
                {% for day in all_days %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 {% if day == rest_day %}border-danger{% endif %}">
                        <div class="card-header {% if day == rest_day %}bg-danger{% else %}bg-primary{% endif %} text-white text-center">
                            {{ day }}
                            {% if day == rest_day %}<i class="bi bi-calendar-x ms-2"></i>{% endif %}
                        </div>
                        <div class="card-body">
                            {% if schedule[day] %}
                                {% for subject in schedule[day] %}
                                <div class="subject-item p-2 mb-2 text-white rounded" style="background-color: {% if subject.priority == 'Ø¹Ø§Ù„ÙŠØ©' %}#dc3545{% elif subject.priority == 'Ù…ØªÙˆØ³Ø·Ø©' %}#ffc107{% else %}#28a745{% endif %};">
                                    <div class="d-flex justify-content-between">
                                        <span><i class="bi bi-book"></i> {{ subject.name }}</span>
                                        <span class="badge bg-light text-dark">{{ subject.minutes }} Ø¯</span>
                                    </div>
                                    <small>Ø§Ù„Ø¯Ø±Ø¬Ø©: {{ subject.grade }}%</small>
                                </div>
                                {% endfor %}
                            {% else %}
                                {% if day == rest_day %}
                                    <p class="text-muted text-center">ÙŠÙˆÙ… Ø¹Ø·Ù„Ø© ğŸ‰</p>
                                {% else %}
                                    <p class="text-muted text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù…</p>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-5">
                <i class="bi bi-emoji-frown fs-1 text-muted"></i>
                <h4 class="mt-3 text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¯ Ø¨Ø¹Ø¯</h4>
                <p class="text-muted">Ø£Ø¶Ù Ù…ÙˆØ§Ø¯Ùƒ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·ØªÙƒ Ø§Ù„Ù…Ø®ØµØµØ©</p>
                <a href="/dashboard" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ§Ø¯</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}